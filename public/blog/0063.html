<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>使用tunnelbroker构建自己的IPv6代理池</title>
    <link rel="icon" href="../favicon.ico">
    
    <link rel="stylesheet" href="../a.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="win95-bg">

<table class="outer" width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td align="center" valign="top">
            <table class="frame" width="650" border="0" cellspacing="0" cellpadding="6">
                
                <tr>
                    <td class="avatar-cell" width="64" rowspan="2" align="center">
                        <a href="../index.html">
                            <img class="avatar" src="../avatar.png" width="48" height="48" alt="avatar">
                        </a>
                    </td>
                    <td class="titlebar" align="center">
                        <h2 class="title" style="margin:4px 0;">使用tunnelbroker构建自己的IPv6代理池</h2>
                        <div class="post-category">Category: blog</div>
                    </td>
                    <td class="infobar" width="160" rowspan="2" align="center">
                        <a href="../index.html">Home</a>
                    </td>
                </tr>
                
                <tr>
                    <td class="nav" align="center">
                        <a href="../index.html">Index</a>
                        <span class="sep">|</span>
                        <a href="../about.html">About</a>
                    </td>
                </tr>

                
                <tr>
                    <td colspan="3">
                        <hr class="hr-etched">
                    </td>
                </tr>

                
                <tr>
                    <td class="content" colspan="3">
                        <div class="post-body"><h1>使用tunnelbroker构建自己的IPv6代理池</h1>
<p>准备</p>
<p>* 阿里云轻量服务器 【Centos 8.2】<br>
* tunnelbroker 账号<br>
* tunnelbroker 通道</p>
<h4>脚本如下</h4>
<p>* sudo vim /etc/sysctl.conf 编辑系统设置ipv6相关</p>
<pre><code class="language-*bash*">net.ipv6.conf.default.disable\_ipv6 = 0    
net.ipv6.conf.lo.disable\_ipv6 = 0    
net.ipv6.conf.eth0.disable\_ipv6 = 0    
    
    
</code></pre>
<p>* sudo sysctl -p 重载系统设置</p>
<p>* 获取Example Config</p>
<blockquote>
<p>2001:xxx:x:xxx::2/64 = [Client IPv6 Address]<br>
172.xxx.xxx.xx = [服务器内网IP]</p>
</blockquote>
<p>* 服务器上执行</p>
<pre><code class="language-*bash*sudo">sudo ip tunnel add he-ipv6 mode sit remote 216.66.22.2 local 172.xxx.xxx.xx ttl 255    
sudo ip link set he-ipv6 up    
sudo ip addr add 2001:xxx:x:xxx::2/64 dev he-ipv6    
sudo ip route add ::/0 dev he-ipv6    
sudo ip -f inet6 addr    
    
</code></pre>
<p>* 验证</p>
<pre><code class="language-*bash*">    
</code></pre>
<p>* 收尾</p>
<pre><code class="language-*bash*sudo">    
# 这个地址在配置里面可以找到 【Routed IPv6 Prefixes】    
sudo ip -6 route add local 2001:xxx:x:xxx::/64 dev lo #添加本地回环接口    
# 测试    
curl --interface 2001:xxx:x:xxx::3 ipv6.ip.sb    
</code></pre>
<p>* 开启代理</p>
<pre><code class="language-*bash*#amd">    
wget https://github.com/deanxv/go-proxy-ipv6-pool/releases/download/v1.0.0/go-proxy-ipv6-pool-linux-amd64    
    
#arm    
    
wget https://github.com/deanxv/go-proxy-ipv6-pool/releases/download/v1.0.0/go-proxy-ipv6-pool-linux-arm64    
    
    
chmod +x go-proxy-ipv6-pool-linux-amd64    
    
# cidr = 【Routed IPv6 Prefixes】    
nohup ./go-proxy-ipv6-pool-linux-amd64 --port 51422 --cidr 2001:xxx:x:xxx::/64 &gt; proxy.log 2&gt;&amp;1 &amp;    
    
curl -x http://xx.xx.xx.xx:51422 http://6.ipw.cn/    
    
# 会收到变化的ipv6地址    
</code></pre>
</div>
                    </td>
                </tr>

                
                <tr>
                    <td colspan="3" align="right" style="font-size:small;">
                        <a href="#">↑ Back to top</a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

    
    <tr>
        <td align="center" valign="bottom" height="60">
            <font size="-1">
                <a href="../index.html">Back to Home</a>
            </font>
        </td>
    </tr>
</table>
</body>
</html>