<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简易Table封装类,所有的Table都需要通过此工具操作合并col，row</title>
    <meta name="description" content="回顾">
    <meta name="keywords" content="javascript, Handtable">
    <style>
        body {
            font-family: sans-serif;
            background-color: #f0f0f0; /*  像素风格  */
            color: #333;
            max-width: 820px;
            margin: 0 auto;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 20px;
            margin-top: 0;
        }

        h2 {
            font-size: 18px;
        }

        h3 {
            font-size: 16px;
        }

        h4 {
            font-size: 14px;
        }

        h5 {
            font-size: 12px;
        }

        h6 {
            font-size: 11px;
        }

        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        code {
            font-family: monospace;
            background-color: #f0f0f0;
            color: #333;
            padding: 2px 4px;
            border-radius: 3px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f0f0f0;
        }

        .t1 {
            border-collapse: collapse;
        }

        .t1 th, .t1 td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        .t1 th {
            background-color: #f0f0f0;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 12px;
            color: #666;
        }

        .highlight {
            background-color: #f0f0f0;
            color: #333;
        }

        .dl-highlight {
            background-color: #f5f5f5;
            color: #333;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .dl-highlight pre {
            background-color: transparent;
            padding: 0;
            border-radius: 0;
            overflow-x: auto;
        }
        .dl-highlight code {
            font-family: monospace;
            background-color: #f0f0f0;
            color: #333;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>简易Table封装类,所有的Table都需要通过此工具操作合并col，row</h1>
    <p>回顾</p>
    <p>发这个贴的原因，是因为 是因为 是因为啥来着，忘了 那就是因为你，因为你 。</p>

    <h2>代码</h2>
    <pre class="dl-highlight"><code class="javascript">
/**
 * divId:插入表格的divId
 * listTitle:插入表格标题
 * listData:插入表格数据
 */
function addTable(divId, listTitle, listData,n) {
	var num = parseInt(Math.random()*100);
	var tableDivId = "table"+num.toString();
	var div = document.getElementById(divId);
	div.innerHTML = "";
	var strTitle = "";
	var scendTitle = "";
	var strDate = "";
	for (var i = 0; i < listTitle.length; i++) {
		if (listTitle[i].indexOf(":") != -1) {
			var strs = listTitle[i].split(":");
			strTitle += '<th>' + strs[0] + '</th>';
		} else {
			strTitle += '<th>' + listTitle[i] + '</th>';
		}
	}
	for (var i = 0; i < listTitle.length; i++) {
		if (listTitle[i].indexOf(":") != -1) {
			var strs = listTitle[i].split(":");
			scendTitle += '<th>' + strs[1] + '</th>';
		} else {
			scendTitle += '<th>' + listTitle[i] + '</th>';
		}
	}
	/**alert(listData.length);*/
	for (i = 0; i < listData.length; i++) {
		strDate += '<tr>';
		for (j = 0; j < listData[0].length; j++) {
			strDate += '<td>' + listData[i][j] + '</td>';
		}
		strDate += '</tr>';
	}
	var table = '<table class="t1" id='+tableDivId+' width="100%"  cellspacing="0" cellpadding="0" ><thead>' + '<tr>' + strTitle + '</tr><tr>' + scendTitle + '</tr></thead><tbody>' + strDate + '</tbody></table>';
	div.innerHTML = table;
	uniteTdCells(tableDivId,n);
	uniteTdRells(tableDivId);
}
/*
 * 合并行
 * tableId:需要操作表格的Id
 */
function uniteTdCells(tableDivId,n) {
	var table = document.getElementById(tableDivId);
	var nLeftCol = n;
	for (var r = 0; r < table.rows.length; r++) {
		for (var c = 0; c < table.rows[r].cells.length; c++) {
			/**选择要合并的列序数，去掉默认全部合并*/
			if (r >= 2 && c >= nLeftCol) {
				continue;
			}
			for (j = r + 1; j < table.rows.length; j++) {
				var cell1 = table.rows[r].cells[c].innerHTML;
				var cell2 = table.rows[j].cells[c].innerHTML;
				if (cell1 == cell2) {
					table.rows[j].cells[c].style.display = 'none';
					table.rows[r].cells[c].rowSpan++;
				} else {
					break;
				}
			}
		}
	}
}

/*
 *合并列
 *tableId：操作表格ID
 */
function uniteTdRells(tableDivId) {
	var table = document.getElementById(tableDivId);
	for (var c = 0; c < table.rows[0].cells.length; c++) {
		for (j = c + 1; j < table.rows[0].cells.length; j++) {
			var strOne = table.rows[0].cells[c].innerHTML;
			var strTwo = table.rows[0].cells[j].innerHTML;
			if (strOne == strTwo) {
				table.rows[0].cells[j].style.display = 'none';
				table.rows[0].cells[c].colSpan++;
			}
		}
	}
}



function uniteTdCellsOne( n) {
	var table = document.getElementById(tableId);
	var nLeftCol = n;
	for (var r = 0; r < table.rows.length; r++) {
		for (var c = 7; c < table.rows[r].cells.length; c++) {
			/**             	/**选择要合并的列序数，去掉默认全部合并*/
			/** 	        	if (r >= 2 && c >= nLeftCol)*/
			/** 	        	{*/
			/** 	        		continue; */
			/** 	        	}*/
			for (j = r + 1; j < table.rows.length; j++) {
				var cell1 = table.rows[r].cells[c].innerHTML;
				var cell2 = table.rows[j].cells[c].innerHTML;
				if (cell1 == cell2) {
					table.rows[j].cells[c].style.display = 'none';
					table.rows[r].cells[c].rowSpan++;
				} else {
					break;
				}
			}
		}
	}
}

    </code></pre>
    <footer>
        Power By Gemini TextGenerate 2024-09-16 21:21:40
    </footer>
    <script>
        // Add DlHighlight.js library here if you want to use it
    </script>
</body>
</html>