<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>简易Table封装类,所有的Table都需要通过此工具操作合并col，row</title>
<meta name="description" content="回顾" />
<meta name="keywords" content="javascript, Handtable" />
<style>
body {
  font-family: sans-serif;
  background-color: #f4f4f4;
  color: #333;
  max-width: 820px;
  margin: 0 auto;
  padding: 20px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s;
}

h1 {
  font-size: 20px;
}

h2 {
  font-size: 18px;
}

h3 {
  font-size: 16px;
}

h4 {
  font-size: 14px;
}

h5 {
  font-size: 12px;
}

h6 {
  font-size: 11px;
}

code {
  background-color: #eee;
  padding: 5px;
  border-radius: 3px;
  font-family: monospace;
}

pre {
  background-color: #eee;
  padding: 10px;
  border-radius: 5px;
  overflow-x: auto;
  font-family: monospace;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
}

th {
  background-color: #f0f0f0;
}

.t1 {
  width: 100%;
  border-collapse: collapse;
}

.t1 th {
  background-color: #f0f0f0;
  font-weight: bold;
  padding: 8px;
  text-align: left;
  border: 1px solid #ccc;
}

.t1 td {
  padding: 8px;
  text-align: left;
  border: 1px solid #ccc;
}
</style>
</head>
<body>
<h1>简易Table封装类,所有的Table都需要通过此工具操作合并col，row</h1>
<p>发这个贴的原因，是因为 是因为 是因为啥来着，忘了 那就是因为你，因为你 。</p>
<h2>代码</h2>
<pre><code class="language-javascript">/**
 * divId:插入表格的divId
 * listTitle:插入表格标题
 * listData:插入表格数据
 */
function addTable(divId, listTitle, listData,n) {
	var num = parseInt(Math.random()*100);
	var tableDivId = "table"+num.toString();
	var div = document.getElementById(divId);
	div.innerHTML = "";
	var strTitle = "";
	var scendTitle = "";
	var strDate = "";
	for (var i = 0; i < listTitle.length; i++) {
		if (listTitle[i].indexOf(":") != -1) {
			var strs = listTitle[i].split(":");
			strTitle += '<th>' + strs[0] + '</th>';
		} else {
			strTitle += '<th>' + listTitle[i] + '</th>';
		}
	}
	for (var i = 0; i < listTitle.length; i++) {
		if (listTitle[i].indexOf(":") != -1) {
			var strs = listTitle[i].split(":");
			scendTitle += '<th>' + strs[1] + '</th>';
		} else {
			scendTitle += '<th>' + listTitle[i] + '</th>';
		}
	}
	/**alert(listData.length);*/
	for (i = 0; i < listData.length; i++) {
		strDate += '<tr>';
		for (j = 0; j < listData[0].length; j++) {
			strDate += '<td>' + listData[i][j] + '</td>';
		}
		strDate += '</tr>';
	}
	var table = '<table class="t1" id='+tableDivId+' width="100%"  cellspacing="0" cellpadding="0" ><thead>' + '<tr>' + strTitle + '</tr><tr>' + scendTitle + '</tr></thead><tbody>' + strDate + '</tbody></table>';
	div.innerHTML = table;
	uniteTdCells(tableDivId,n);
	uniteTdRells(tableDivId);
}
/*
 * 合并行
 * tableId:需要操作表格的Id
 */
function uniteTdCells(tableDivId,n) {
	var table = document.getElementById(tableDivId);
	var nLeftCol = n;
	for (var r = 0; r < table.rows.length; r++) {
		for (var c = 0; c < table.rows[r].cells.length; c++) {
			/**选择要合并的列序数，去掉默认全部合并*/
			if (r >= 2 && c >= nLeftCol) {
				continue;
			}
			for (j = r + 1; j < table.rows.length; j++) {
				var cell1 = table.rows[r].cells[c].innerHTML;
				var cell2 = table.rows[j].cells[c].innerHTML;
				if (cell1 == cell2) {
					table.rows[j].cells[c].style.display = 'none';
					table.rows[r].cells[c].rowSpan++;
				} else {
					break;
				}
			}
		}
	}
}

/*
 *合并列
 *tableId：操作表格ID
 */
function uniteTdRells(tableDivId) {
	var table = document.getElementById(tableDivId);
	for (var c = 0; c < table.rows[0].cells.length; c++) {
		for (j = c + 1; j < table.rows[0].cells.length; j++) {
			var strOne = table.rows[0].cells[c].innerHTML;
			var strTwo = table.rows[0].cells[j].innerHTML;
			if (strOne == strTwo) {
				table.rows[0].cells[j].style.display = 'none';
				table.rows[0].cells[c].colSpan++;
			}
		}
	}
}



function uniteTdCellsOne( n) {
	var table = document.getElementById(tableId);
	var nLeftCol = n;
	for (var r = 0; r < table.rows.length; r++) {
		for (var c = 7; c < table.rows[r].cells.length; c++) {
			/**             	/**选择要合并的列序数，去掉默认全部合并*/
			/** 	        	if (r >= 2 && c >= nLeftCol)*/
			/** 	        	{*/
			/** 	        		continue; */
			/** 	        	}*/
			for (j = r + 1; j < table.rows.length; j++) {
				var cell1 = table.rows[r].cells[c].innerHTML;
				var cell2 = table.rows[j].cells[c].innerHTML;
				if (cell1 == cell2) {
					table.rows[j].cells[c].style.display = 'none';
					table.rows[r].cells[c].rowSpan++;
				} else {
					break;
				}
			}
		}
	}
}

</code></pre>
<footer>
Power By Gemini TextGenerate 2024-09-16
</footer>
<script>
  // 使用随机种子
  Math.seedrandom(199602051111);

  // 获取当前时间
  const now = new Date();
  const hours = now.getHours();

  // 决定主题背景色
  if (hours >= 6 && hours < 18) {
    document.body.style.backgroundColor = '#f4f4f4';
  } else {
    document.body.style.backgroundColor = '#222';
    document.body.style.color = '#fff';
  }
</script>
</body>
</html>