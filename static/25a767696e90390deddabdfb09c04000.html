
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="运维">
    <meta name="keywords" content="linux">
    <title>Linux 丛裸机进行安全加固[原创]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --day-bg: #ffffff;
            --day-text: #333333;
            --night-bg: #1a1a1a;
            --night-text: #f0f0f0;
        }

        body {
            max-width: 820px;
            margin: 0 auto;
            padding: 20px;
            line-height: 21px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .metadata {
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }

        .metadata p {
            margin: 5px 0;
            font-size: 0.9em;
        }

        .day-mode {
            background-color: var(--day-bg);
            color: var(--day-text);
        }

        .night-mode {
            background-color: var(--night-bg);
            color: var(--night-text);
        }

        h1 { font-size: 19px; text-align: center; }
        h2 { font-size: 18px; }
        h3 { font-size: 16px; }
        h4 { font-size: 14px; }
        h5 { font-size: 12px; }
        h6 { font-size: 11px; }

        pre {
            line-height: 24px;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        code {
            font-family: 'Fira Code', Consolas, Monaco, 'Courier New', monospace;
        }

        img {
            display: block;
            max-width: 600px;
            height: auto;
            margin: 20px auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .content {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.05);
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #ddd;
            font-size: 0.9em;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .content {
            animation: fadeIn 0.5s ease-in;
        }
    </style>
</head>
<body class="day-mode">
    <div class="metadata">
        <p><strong>Title:</strong> Linux 丛裸机进行安全加固[原创]</p>
        <p><strong>Categories:</strong> linux</p>
        <p><strong>Description:</strong> 运维</p>
        <p><strong>Keywords:</strong> linux</p>
    </div>
    <div class="content">
        <p>Linux 丛裸机进行安全加固</p>
<p>date：2017-10-06
author：杨然儿</p>
<h1 id="_1">创建用户</h1>
<p>useradd abs
password abs</p>
<h1 id="ssh">一、ssh加固</h1>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">vi</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">sshd_config</span>
<span class="w">        </span><span class="c1">####################</span>
<span class="w">        </span><span class="n">Port</span><span class="w"> </span><span class="mi">35791</span>
<span class="w">        </span><span class="n">Protocol</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="n">MaxAuthTries</span><span class="w"> </span><span class="mi">3</span>
<span class="w">        </span><span class="n">MaxSessions</span><span class="w"> </span><span class="mi">3</span>
<span class="w">        </span><span class="n">RSAAuthentication</span><span class="w"> </span><span class="n">yes</span>
<span class="w">        </span><span class="n">PubkeyAuthentication</span><span class="w"> </span><span class="n">yes</span>
<span class="w">        </span><span class="n">UsePAM</span><span class="w"> </span><span class="n">yes</span>
<span class="w">        </span><span class="n">X11Forwarding</span><span class="w"> </span><span class="n">yes</span>
<span class="w">        </span><span class="n">Banner</span><span class="w"> </span><span class="n">none</span>
<span class="w">        </span><span class="n">UseDNS</span><span class="w"> </span><span class="n">no</span>
<span class="w">        </span><span class="n">PermitRootLogin</span><span class="w"> </span><span class="n">no</span>
<span class="w">        </span><span class="n">PasswordAuthentication</span><span class="w"> </span><span class="n">yes</span>
<span class="w">        </span><span class="c1">#####################</span>
<span class="w">    </span><span class="n">service</span><span class="w"> </span><span class="n">sshd</span><span class="w"> </span><span class="n">reload</span>
</code></pre></div>

<h1 id="profile">二、环境变量加固profile</h1>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">vi</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="k">profile</span>
<span class="w">        </span><span class="c1">#######################################</span>
<span class="w">        </span><span class="c1">##记录历史命令时间</span>
<span class="w">        </span><span class="k">export</span><span class="w"> </span><span class="n">HISTTIMEFORMAT</span><span class="o">=</span><span class="s2">&quot;`whoami`  %F   %T  &quot;</span>
<span class="w">        </span><span class="c1">##修改帐户TMOUT值，600秒无操作自动退出</span>
<span class="w">        </span><span class="k">export</span><span class="w"> </span><span class="n">PS1</span><span class="o">=</span><span class="s1">&#39;$LOGNAME@&#39;</span><span class="n n-Quoted">`hostname`</span><span class="o">:</span><span class="s1">&#39;$PWD</span><span class="se">&#39;&#39;</span><span class="s1">$ &#39;</span>
<span class="w">        </span><span class="n">umask</span><span class="w"> </span><span class="mi">022</span>
<span class="w">        </span><span class="n">TMOUT</span><span class="o">=</span><span class="mi">600</span>
<span class="w">        </span><span class="c1">#######################################</span>
<span class="w">    </span><span class="k">source</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="k">profile</span>
</code></pre></div>

<h1 id="banner">三、屏蔽banner信息</h1>
<div class="codehilite"><pre><span></span><code>    备份方法：
            #cp -p /etc/ssh/sshd_config /etc/ssh/sshd_config_bak
            #cp -p /etc/motd /etc/motd_bak

    加固方法：
            #vi /etc/ssh/sshd_config
            banner NONE

            #vi /etc/motd
            删除全部内容或更新成自己想要添加的内容
</code></pre></div>

<h1 id="x_windows">四、禁用x_windows服务</h1>
<div class="codehilite"><pre><span></span><code>        vi /etc/inittab
        ################################################################
        id:5:initdefault:                   --5改成3
        #######################################################################
</code></pre></div>

<h1 id="_2">五、打开审计</h1>
<div class="codehilite"><pre><span></span><code>        chkconfig auditd on
        service auditd restart
</code></pre></div>

<h1 id="_3">六、清理不必要的信任主机</h1>
<div class="codehilite"><pre><span></span><code>    --删除其中不必要的主机
        #vi /etc/hosts.equiv
        #vi /$HOME/.rhosts
</code></pre></div>

<h1 id="_4">七、安装基础包</h1>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span><span class="err">、安装</span><span class="n">rz</span><span class="w"> </span><span class="n">sz和</span><span class="w"> </span><span class="n">screen</span>
<span class="w">    </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span>
<span class="w">    </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">lrzsz</span>
<span class="w">    </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">screen</span>
<span class="w">    </span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="err">查看</span>
<span class="w">    </span><span class="n">rz</span><span class="w">      </span><span class="c1">##会弹出一个框</span>

<span class="mi">2</span><span class="err">、安装</span><span class="n">iftop</span>
<span class="w">    </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span>
<span class="w">        </span><span class="n">yum</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">flex</span><span class="w"> </span><span class="n">byacc</span><span class="w">  </span><span class="n">libpcap</span><span class="w"> </span><span class="n">ncurses</span><span class="w"> </span><span class="n">ncurses</span><span class="o">-</span><span class="n">devel</span><span class="w"> </span><span class="n">libpcap</span><span class="o">-</span><span class="n">devel</span>
<span class="w">        </span><span class="n">wget</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ex</span><span class="o">-</span><span class="n">parrot</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pdw</span><span class="o">/</span><span class="n">iftop</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">iftop</span><span class="o">-</span><span class="mf">1.0</span><span class="n">pre2</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="w">        </span><span class="n">tar</span><span class="w"> </span><span class="n">zxvf</span><span class="w"> </span><span class="n">iftop</span><span class="o">-</span><span class="mf">1.0</span><span class="n">pre2</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="w">        </span><span class="n">cd</span><span class="w"> </span><span class="n">iftop</span><span class="o">-</span><span class="mf">1.0</span><span class="n">pre2</span>
<span class="w">        </span><span class="o">./</span><span class="n">configure</span>
<span class="w">        </span><span class="n">make</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">install</span>
<span class="w">    </span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="err">查看带宽</span>
<span class="w">        </span><span class="n">iftop</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w">  </span><span class="o">-</span><span class="n">N</span><span class="w"> </span><span class="o">-</span><span class="n">p</span>

<span class="mi">3</span><span class="err">、安装</span><span class="n">jdk</span><span class="w"> </span><span class="err">（</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">0</span><span class="w">   </span><span class="mf">1.7</span><span class="o">.</span><span class="mi">0</span><span class="w">   </span><span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="err">）这三个版本的</span><span class="n">jdk包</span><span class="w"> </span><span class="err">默认为</span><span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="err">版本</span>
<span class="w">    </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="err">下载安装包到某个路径</span>
<span class="w">        </span><span class="n">mkdir</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">jdk</span><span class="o">/</span>
<span class="w">         </span><span class="n">jdk</span><span class="o">-</span><span class="mi">8</span><span class="n">u65</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">gz</span>
<span class="w">         </span><span class="n">jdk</span><span class="o">-</span><span class="mi">7</span><span class="n">u80</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">gz</span>

<span class="w">    </span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="err">解压</span>
<span class="w">        </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">7</span><span class="n">u80</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">gz</span>
<span class="w">        </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">8</span><span class="n">u65</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">gz</span>

<span class="w">    </span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="err">修改环境变量</span>
<span class="w">        </span><span class="n">vim</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">profile</span>
<span class="w">        </span><span class="c1">##################################################################################################</span>
<span class="w">            </span><span class="k">export</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">jdk</span><span class="o">/</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">8.0</span><span class="n">_65</span>
<span class="w">            </span><span class="k">export</span><span class="w"> </span><span class="n">JRE_HOME</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">jdk</span><span class="o">/</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">8.0</span><span class="n">_65</span><span class="o">/</span><span class="n">jre</span>
<span class="w">            </span><span class="k">export</span><span class="w"> </span><span class="n">CLASSPATH</span><span class="o">=.</span><span class="p">:</span><span class="o">$</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">dt</span><span class="o">.</span><span class="n">jar</span><span class="p">:</span><span class="o">$</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tools</span><span class="o">.</span><span class="n">jar</span><span class="p">:</span><span class="o">$</span><span class="n">JRE_HOME</span><span class="o">/</span><span class="n">lib</span><span class="p">:</span><span class="o">$</span><span class="n">CLASSPATH</span>
<span class="w">            </span><span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=$</span><span class="n">PATH</span><span class="p">:</span><span class="o">$</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span>
<span class="w">        </span><span class="c1">###################################################################################################</span>
<span class="w">        </span><span class="n">source</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">profile</span>
<span class="w">    </span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="err">查看</span><span class="n">java版本</span>
<span class="w">        </span><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">version</span>
<span class="w">        </span><span class="o">----------------------------------------------------------------------</span>
<span class="w">         </span><span class="n">java</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s2">&quot;1.8.0_65&quot;</span>
<span class="w">         </span><span class="n">Java</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="n">SE</span><span class="w"> </span><span class="n">Runtime</span><span class="w"> </span><span class="n">Environment</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="n">_65</span><span class="o">-</span><span class="n">b17</span><span class="p">)</span>
<span class="w">         </span><span class="n">Java</span><span class="w"> </span><span class="n">HotSpot</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">Bit</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">25.65</span><span class="o">-</span><span class="n">b01</span><span class="p">,</span><span class="w"> </span><span class="n">mixed</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>

<span class="w">        </span><span class="o">------------------------------------------------------------------------</span>
<span class="w">    </span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">6.0</span><span class="err">版本</span>
<span class="w">        </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">jdk</span><span class="o">/</span>
<span class="w">        </span><span class="n">chmod</span><span class="w"> </span><span class="mi">755</span><span class="w"> </span><span class="n">jdk</span><span class="o">-</span><span class="mi">6</span><span class="n">u45</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">bin</span>
<span class="w">        </span><span class="o">./</span><span class="n">jdk</span><span class="o">-</span><span class="mi">6</span><span class="n">u45</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">bin</span><span class="w"> </span><span class="err">（注意，这个步骤一定要在</span><span class="n">jdk</span><span class="o">-</span><span class="mi">6</span><span class="n">u45</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="o">.</span><span class="n">bin所在目录下</span><span class="err">）</span>
<span class="w">        </span><span class="err">会生成一个</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">6.0</span><span class="n">_45目录</span>
<span class="w">    </span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="err">查看</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">0</span><span class="err">或</span><span class="mf">1.7</span><span class="o">.</span><span class="mi">0</span><span class="err">的版本</span>
<span class="w">        </span><span class="o">./</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">6.0</span><span class="n">_45</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">version</span>
<span class="w">        </span><span class="o">-----------------------------------------------------------------------------</span>
<span class="w">        </span><span class="n">java</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s2">&quot;1.6.0_45&quot;</span>
<span class="w">        </span><span class="n">Java</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="n">SE</span><span class="w"> </span><span class="n">Runtime</span><span class="w"> </span><span class="n">Environment</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">1.6</span><span class="o">.</span><span class="mi">0</span><span class="n">_45</span><span class="o">-</span><span class="n">b06</span><span class="p">)</span>
<span class="w">        </span><span class="n">Java</span><span class="w"> </span><span class="n">HotSpot</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">Bit</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">20.45</span><span class="o">-</span><span class="n">b01</span><span class="p">,</span><span class="w"> </span><span class="n">mixed</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>

<span class="w">        </span><span class="o">------------------------------------------------------------------------------</span>
<span class="w">        </span><span class="err">或</span>
<span class="w">        </span><span class="o">./</span><span class="n">jdk1</span><span class="o">.</span><span class="mf">7.0</span><span class="n">_80</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">version</span>
<span class="w">        </span><span class="o">-------------------------------------------------------------------------------</span>
<span class="w">        </span><span class="n">java</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s2">&quot;1.7.0_80&quot;</span>
<span class="w">        </span><span class="n">Java</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="n">SE</span><span class="w"> </span><span class="n">Runtime</span><span class="w"> </span><span class="n">Environment</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">1.7</span><span class="o">.</span><span class="mi">0</span><span class="n">_80</span><span class="o">-</span><span class="n">b15</span><span class="p">)</span>
<span class="w">        </span><span class="n">Java</span><span class="w"> </span><span class="n">HotSpot</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">Bit</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="p">(</span><span class="n">build</span><span class="w"> </span><span class="mf">24.80</span><span class="o">-</span><span class="n">b11</span><span class="p">,</span><span class="w"> </span><span class="n">mixed</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>

<span class="w">        </span><span class="o">--------------------------------------------------------------------------------</span>


<span class="mi">4</span><span class="err">、安装</span><span class="n">Python</span>
<span class="w">    </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span><span class="w"> </span><span class="n">sqlite</span><span class="o">-</span><span class="n">devel</span><span class="p">(</span><span class="err">因为</span><span class="w"> </span><span class="n">Flask</span><span class="w"> </span><span class="err">应用程序可能使用能</span><span class="w"> </span><span class="n">Sqlite</span><span class="w"> </span><span class="err">数据库，所以这个得装上（之前因为没装这个，导致</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="err">无法导入</span><span class="w"> </span><span class="n">sqlite3</span><span class="w"> </span><span class="err">库）</span><span class="p">)</span>
<span class="w">        </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">sqlite</span><span class="o">-</span><span class="n">devel</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">    </span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span><span class="n">Python2</span><span class="o">.</span><span class="mi">7</span>
<span class="w">        </span><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ftp</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">8</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mf">8.</span><span class="n">tgz</span>
<span class="w">        </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="n">Python</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mf">8.</span><span class="n">tgz</span>
<span class="w">        </span><span class="n">cd</span><span class="w"> </span><span class="n">Python</span><span class="o">-</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">8</span>
<span class="w">        </span><span class="o">./</span><span class="n">configure</span><span class="w"> </span><span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span>
<span class="w">        </span><span class="n">make</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">install</span>
<span class="w">    </span><span class="err">安装成功之后，你可以在</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="w"> </span><span class="err">找到</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="mf">2.7</span><span class="err">。</span>

<span class="mi">5</span><span class="err">、安装</span><span class="n">aide</span>
<span class="w">    </span><span class="mf">1.</span><span class="w"> </span><span class="err">安装</span><span class="n">mhash</span>
<span class="w">        </span><span class="n">yum</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">mhash</span><span class="o">-</span><span class="n">devel</span><span class="o">.</span><span class="n">x86_64</span><span class="w"> </span><span class="n">mhash</span><span class="o">.</span><span class="n">x86_64</span>
<span class="w">    </span><span class="mf">2.</span><span class="err">安装</span><span class="n">aide</span>
<span class="w">        </span><span class="n">yum</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">aide</span><span class="o">.</span><span class="n">x86_64</span>
<span class="w">    </span><span class="mf">3.</span><span class="w"> </span><span class="err">配置</span><span class="p">(</span><span class="err">默认即可</span><span class="p">)</span>
<span class="w">        </span><span class="n">vim</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">aide</span><span class="o">.</span><span class="n">conf</span>
<span class="w">        </span><span class="o">--</span><span class="err">可以不改</span><span class="p">,</span><span class="err">按默认就可以了</span>
<span class="w">    </span><span class="mf">4.</span><span class="err">生成初始化数据库</span>
<span class="w">        </span><span class="c1"># aide --init</span>
<span class="w">        </span><span class="c1"># mv /var/lib/aide/aide.db.new.gz /var/lib/aide/aide.db.gz</span>
<span class="w">    </span><span class="mf">5.</span><span class="w"> </span><span class="err">开始检测</span>
<span class="w">        </span><span class="c1"># aide --check</span>

<span class="mi">6</span><span class="err">、</span><span class="n">Lynis安全检查工具</span>
<span class="w">    </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="err">介绍</span>
<span class="w">        </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cisofy</span><span class="o">.</span><span class="n">com</span><span class="o">/</span>
<span class="w">        </span><span class="n">Lynis是一个为系统管理员提供的</span><span class="w"> </span><span class="n">Linux和Unix的审计工具</span><span class="w"> </span><span class="err">。</span><span class="w"> </span><span class="n">Lynis扫描系统的配置</span><span class="err">，并创建概述系统信息与安全问题所使用的专业审计。</span>
<span class="w">        </span><span class="err">当用户启动该软件后，</span><span class="n">Lynis会会逐次扫描系统的内核</span><span class="err">、用户目录、软件信息等，并最后生成一个全面的报告。</span>
<span class="w">        </span><span class="err">需要说明的是，该工具只能生成一个扫描检测后的报告，对用户起到提醒作用，本身并不能提高系统的安全性。</span>
<span class="w">        </span><span class="err">但是该工具却可以成为其他安全软件、系统测评软件的模块。</span>

<span class="w">    </span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="err">安装</span>
<span class="w">        </span><span class="n">yum</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">lynis</span>
<span class="w">        </span><span class="err">或</span>
<span class="w">        </span><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cisofy</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">lynis</span><span class="o">-</span><span class="mf">2.1</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>

<span class="w">    </span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="err">全面检查</span>
<span class="w">        </span><span class="n">lynis</span><span class="w"> </span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">all</span><span class="w"> </span><span class="o">-</span><span class="n">Q</span>

<span class="w">    </span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="err">自动检查</span>
<span class="w">        </span><span class="n">lynis</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="o">--</span><span class="n">auditor</span><span class="w"> </span><span class="s2">&quot;automated&quot;</span><span class="w"> </span><span class="o">--</span><span class="n">cronjob</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">lynis</span><span class="o">/</span><span class="n">report</span><span class="o">.</span><span class="n">txt</span>

<span class="w">    </span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="err">检查某项目</span>
<span class="w">        </span><span class="n">lynis</span><span class="w"> </span><span class="o">--</span><span class="n">tests</span><span class="w"> </span><span class="n">FILE</span><span class="o">-</span><span class="mi">6354</span><span class="w"> </span><span class="o">--</span><span class="n">quick</span>

<span class="w">    </span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="err">查看警告</span>
<span class="w">        </span><span class="n">grep</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">lynis</span><span class="o">.</span><span class="n">log</span>

<span class="w">    </span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="err">查看建议</span>
<span class="w">        </span><span class="n">grep</span><span class="w"> </span><span class="n">Suggestion</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">lynis</span><span class="o">.</span><span class="n">log</span>
</code></pre></div>

<h1 id="_5">八、建立主机间的信任</h1>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span><span class="err">、</span><span class="n">生成密钥</span><span class="p">(</span><span class="n">默认的是rsa</span><span class="p">)</span>
<span class="w">    </span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">rsa</span>
<span class="mi">2</span><span class="err">、</span><span class="n">将生成的密钥</span><span class="err">（</span><span class="n">公钥</span><span class="err">）</span><span class="n">拷贝给另一台主机</span>
<span class="w">    </span><span class="n">ssh</span><span class="o">-</span><span class="k">copy</span><span class="o">-</span><span class="kt">id</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span><span class="w"> </span><span class="s">&quot;-p 35791 root@192.168.1.4&quot;</span>
<span class="w">    </span><span class="n">指定端口时记得使用双引号</span><span class="err">，</span><span class="n">以免报错</span>
<span class="mi">3</span><span class="err">、</span><span class="n">测试</span>
<span class="w">    </span><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">35791</span><span class="w"> </span><span class="n">root</span><span class="mf">@192.168.1.4</span>
<span class="w">    </span><span class="n">这样直接连接到192</span><span class="mf">.168.1.4</span><span class="n">这一台主机上</span><span class="err">，</span><span class="n">不用输入密码就是添加信任成功</span>
</code></pre></div>

<h1 id="_6">九、修改主机名</h1>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="n">临时修改主机名</span>
<span class="w">    </span><span class="n">查看当前主机名</span><span class="err">：</span>
<span class="w">    </span><span class="n">spark</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="err">~$</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">    </span><span class="n">localhost</span>

<span class="w">    </span><span class="n">修改主机名并查看当前主机名</span><span class="err">：</span>
<span class="w">    </span><span class="n">spark</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="err">~$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="n">hadoop</span>
<span class="w">    </span><span class="n">spark</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="err">~$</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">    </span><span class="n">hadoop</span>
<span class="n">PS</span><span class="p">:</span><span class="n">以上的修改只是临时修改</span><span class="err">，</span><span class="n">重启后就恢复原样了</span><span class="err">。</span>

<span class="mf">2.</span><span class="n">永久修改主机名</span>
<span class="w">    </span><span class="n">步骤1</span><span class="err">：</span>

<span class="w">    </span><span class="n">修改</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="kr">sys</span><span class="n">config</span><span class="o">/</span><span class="n">network中的hostname</span>

<span class="w">    </span><span class="n">vi</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="kr">sys</span><span class="n">config</span><span class="o">/</span><span class="n">network</span>
<span class="w">    </span><span class="n">HOSTNAME</span><span class="o">=</span><span class="n">localhost</span><span class="mf">.</span><span class="n">localdomain</span><span class="w">  </span><span class="err">#</span><span class="n">修改localhost</span><span class="mf">.</span><span class="n">localdomain为orcl1</span>
<span class="w">    </span><span class="n">修改network的HOSTNAME项</span><span class="err">。</span><span class="n">点前面是主机名</span><span class="err">，</span><span class="n">点后面是域名</span><span class="err">。</span><span class="n">没有点就是主机名</span><span class="err">。</span>

<span class="w">    </span><span class="n">这个是永久修改</span><span class="err">，</span><span class="n">重启后生效</span><span class="err">。</span><span class="n">目前不知道怎么立即生效</span><span class="err">。</span>

<span class="w">    </span><span class="n">想立即生效</span><span class="err">，</span><span class="n">可以同时采用第一种方法</span><span class="err">。</span>

<span class="w">    </span><span class="n">步骤2</span><span class="err">：</span>
<span class="w">    </span><span class="n">修改</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts文件</span>

<span class="w">    </span><span class="n">vi</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
<span class="w">    </span><span class="mf">127.0.0.1</span><span class="w">    </span><span class="n">localhost</span><span class="mf">.</span><span class="n">localdomain</span><span class="w">  </span><span class="err">#</span><span class="n">修改localhost</span><span class="mf">.</span><span class="n">localdomain为orcl1</span>
<span class="w">    </span><span class="n">shutdown</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="n">now</span><span class="w">    </span><span class="err">#</span><span class="n">最后</span><span class="err">，</span><span class="n">重启服务器即可</span><span class="err">。</span>
</code></pre></div>

<h1 id="_7">十、配置防火墙</h1>
<div class="codehilite"><pre><span></span><code><span class="mf">1</span><span class="err">、</span><span class="n">进入配置文件</span>
<span class="w">    </span><span class="o">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="w">    </span><span class="n">vim</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="kr">sys</span><span class="n">config</span><span class="o">/</span><span class="n">iptables</span>
<span class="w">        </span><span class="err">########################################################</span>
<span class="w">        </span><span class="o">*</span><span class="n">filter</span>
<span class="w">        </span><span class="err">################</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">Accept</span><span class="w"> </span><span class="n">Hosts</span><span class="w"> </span><span class="err">######################</span>
<span class="w">        </span><span class="err">###</span><span class="n">允许保垒机</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">221.41.47.213</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">   </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">10.168.189.37</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">   </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="err">###</span><span class="n">允许本机</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">221.43.178.5</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">    </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">10.0.0.10</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">       </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="err">###</span><span class="n">允许内网</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">10.0.0.0</span><span class="o">/</span><span class="mf">8</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">         </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="err">###</span><span class="n">允许腾讯众创空间</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">221.69.10.134</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">   </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">####</span><span class="w"> </span><span class="n">MMSS</span><span class="w"> </span><span class="mf">249</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">100.41.85.249</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">  </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="mf">100.41.85.249</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w">  </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">###</span><span class="n">限制连接数</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">8080</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">connlimit</span><span class="w"> </span><span class="o">--</span><span class="n">connlimit</span><span class="o">-</span><span class="n">above</span><span class="w"> </span><span class="mf">3000</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">8888</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">connlimit</span><span class="w"> </span><span class="o">--</span><span class="n">connlimit</span><span class="o">-</span><span class="n">above</span><span class="w"> </span><span class="mf">3000</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">28080</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">connlimit</span><span class="w"> </span><span class="o">--</span><span class="n">connlimit</span><span class="o">-</span><span class="n">above</span><span class="w"> </span><span class="mf">3000</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>


<span class="w">        </span><span class="err">###</span><span class="n">允许除35791之外所有端口</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="err">!</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">################</span><span class="w"> </span><span class="n">Black</span><span class="w"> </span><span class="kr">List</span><span class="w">  </span><span class="err">############################</span>
<span class="w">        </span><span class="err">#</span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">106.187.53.56</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">35791</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>


<span class="w">        </span><span class="err">###########</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">Resolved</span><span class="w"> </span><span class="err">##############################</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">udp</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">udp</span><span class="w"> </span><span class="o">--</span><span class="n">sport</span><span class="w"> </span><span class="mf">53</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">udp</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">udp</span><span class="w"> </span><span class="o">--</span><span class="n">dport</span><span class="w"> </span><span class="mf">53</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">#################</span><span class="w"> </span><span class="n">ALLOW</span><span class="w"> </span><span class="n">Local</span><span class="w">  </span><span class="err">########################</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">lo</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">#################</span><span class="w"> </span><span class="kr">For</span><span class="n">bidden</span><span class="w"> </span><span class="n">Ping</span><span class="w"> </span><span class="err">#######################</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">eth0</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">icmp</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">0</span><span class="o">/</span><span class="mf">0</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="mf">0</span><span class="o">/</span><span class="mf">0</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">DROP</span>


<span class="w">        </span><span class="err">#################</span><span class="w"> </span><span class="n">NFS</span><span class="w"> </span><span class="n">Backup</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="err">####################</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">10.168.189.37</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="o">-</span><span class="n">A</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="mf">121.41.47.213</span><span class="o">/</span><span class="mf">32</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">ACCEPT</span>


<span class="w">        </span><span class="err">#################</span><span class="w"> </span><span class="kr">For</span><span class="n">bidden</span><span class="w"> </span><span class="n">ALL</span><span class="w"> </span><span class="err">########################</span>
<span class="w">        </span><span class="o">-</span><span class="n">P</span><span class="w"> </span><span class="kr">INPUT</span><span class="w"> </span><span class="n">DROP</span>

<span class="w">        </span><span class="err">#################</span><span class="w"> </span><span class="n">OUTPUT</span><span class="w"> </span><span class="n">Settings</span><span class="w"> </span><span class="err">####################</span>
<span class="w">        </span><span class="o">-</span><span class="n">P</span><span class="w"> </span><span class="n">OUTPUT</span><span class="w"> </span><span class="n">ACCEPT</span>
<span class="w">        </span><span class="n">COMMIT</span>
<span class="w">        </span><span class="err">#####################################################</span>
</code></pre></div>

<p>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<h1 id="_8">十一、阿里云服务器安装安骑士</h1>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span><span class="err">、安装</span><span class="mi">64</span><span class="err">位的执行命令</span>
<span class="w">    </span><span class="n">wget</span><span class="w"> </span><span class="s1">&#39;http://update.aegis.aliyun.com/download/AliAqsInstall_64.sh&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">sh</span><span class="w"> </span><span class="n">AliAqsInstall_64</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">i24iJ7</span>

<span class="mi">2</span><span class="err">、安装</span><span class="mi">32</span><span class="err">位的执行命令</span>
<span class="w">    </span><span class="n">wget</span><span class="w"> </span><span class="s1">&#39;http://update.aegis.aliyun.com/download/AliAqsInstall_32.sh&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">sh</span><span class="w"> </span><span class="n">AliAqsInstall_32</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">i24iJ7</span>
</code></pre></div>

<ul>
<li>以上操作经过验证可以直接拿去。</li>
<li>auther <code>breakEval13</code></li>
<li>https://github.com/breakEval13</li>
</ul>
    </div>
    <footer>
        Power By Python Markdown Generate 2025-03-31 13:05:11
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });

        function setThemeMode() {
            const hour = new Date().getHours();
            const body = document.body;
            if (hour >= 18 || hour < 6) {
                body.classList.remove('day-mode');
                body.classList.add('night-mode');
            } else {
                body.classList.remove('night-mode');
                body.classList.add('day-mode');
            }
        }

        setThemeMode();
        setInterval(setThemeMode, 60000);
    </script>
</body>
</html>
