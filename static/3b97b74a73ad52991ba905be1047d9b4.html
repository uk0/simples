<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centos kafka 消息队列 </title>
    <meta name="description" content="Centos kafka 消息队列 ">
    <meta name="keywords" content="kafka">
    <style>
        body {
            background-color: #f0f0f0;
            font-family: sans-serif;
            max-width: 820px;
            margin: 0 auto;
            padding: 20px;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1);
            line-height: 21px;
        }

        h1 {
            font-size: 20px;
            text-align: center;
        }

        h2 {
            font-size: 18px;
        }

        h3 {
            font-size: 16px;
        }

        h4 {
            font-size: 14px;
        }

        h5 {
            font-size: 12px;
        }

        h6 {
            font-size: 11px;
        }

        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            line-height: 24px;
        }

        code {
            font-family: Consolas, Monaco, 'Lucida Console', monospace;
            background-color: #e0e0e0;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .highlight {
            background-color: #e9e9e9;
            padding: 2px 4px;
            border-radius: 3px;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: #888;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const codeElements = document.querySelectorAll('pre code');
            codeElements.forEach(code => {
                const lines = code.textContent.split('\n');
                const highlightedLines = lines.map((line, index) => {
                    if (line.trim() === '') {
                        return `<span class="highlight">${line}</span>`;
                    } else {
                        return `<span>${line}</span>`;
                    }
                });
                code.innerHTML = highlightedLines.join('\n');
            });
        });
    </script>
</head>
<body>
    <h1>kafka 消息队列</h1>
    <p>
        > kafka new Version
    </p>
    <h2>安装配置</h2>
    <p>查询下载最新版本 kafka <br>
        http://kafka.apache.org/downloads.html</p>
    <pre><code class="language-bash">wget http://mirror.bit.edu.cn/apache/kafka/0.8.2.0/kafka-0.8.2.0-src.tgz
tar zxvf kafka-0.8.2.0-src.tgz
mv kafka-0.8.2.0-src /opt/local/kafka
cd /opt/local/kafka
./gradlew jar</code></pre>
    <p>提示:</p>
    <p>错误: 找不到或无法加载主类 org.gradle.wrapper.GradleWrapperMain</p>
    <p>需要先安装 gradle</p>
    <pre><code class="language-bash">http://www.scala-lang.org/files/archive/scala-2.10.4.tgz
tar zxvf scala-2.10.4.tgz
mv scala-2.10.4 /usr/lib64/scala</code></pre>
    <p>设置环境变量 </p>
    <pre><code class="language-bash">vi /etc/profile</code></pre>
    <pre><code class="language-bash">export SACLA_HOME=/usr/lib64/scala/
export PATH=$SACLA_HOME/bin:$PATH
source /etc/profile</code></pre>
    <p>然后再执行 gradlew jar</p>
    <pre><code class="language-bash">./gradlew jarAll</code></pre>
    <p>如果 jarAll 会报错，java 版本不能为1.8 不然会报不兼容的错误，请使用1.7版本</p>
    <pre><code class="language-bash">./gradlew jar --stacktrace  --info --debug</code></pre>
    <p></p>
    <p>创建日志目录</p>
    <pre><code class="language-bash">mkdir -p /opt/local/kafka/logs</code></pre>
    <p></p>
    <p>编辑配置文件</p>
    <pre><code class="language-bash">vim config/server.properties</code></pre>
    <p>将 log.dirs=/tmp/kafka-logs
改为</p>
    <pre><code class="language-bash">log.dirs=/opt/local/kafka/logs</code></pre>
    <p>将 zookeeper.connect=localhost:2181
改为</p>
    <pre><code class="language-bash">zookeeper.connect=172.24.0.100:2181</code></pre>
    <p>启动程序</p>
    <pre><code class="language-bash">nohup /opt/local/kafka/bin/zookeeper-server-start.sh /opt/local/kafka/config/zookeeper.properties &
nohup /opt/local/kafka/bin/kafka-server-start.sh /opt/local/kafka/config/server.properties &</code></pre>
    <p></p>
    <p>创建主题</p>
    <pre><code class="language-bash">/opt/local/kafka/bin/kafka-topics.sh --create --zookeeper 192.168.20.200:2181 --replication-factor 1 --partitions 1 --topic LJ200</code></pre>
    <p>查看现有主题</p>
    <pre><code class="language-bash">/opt/local/kafka/bin/kafka-topics.sh --list --zookeeper 192.168.20.200:2181</code></pre>
    <footer>
        Power By Gemini TextGenerate 2024-09-16 22:22:30
    </footer>
</body>
</html>