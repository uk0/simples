<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centos kafka 消息队列</title>
    <meta name="description" content="Centos kafka 消息队列" />
    <meta name="keywords" content="kafka" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            max-width: 820px;
            margin: 0 auto;
        }
        h1 {
            font-size: 20px;
            text-align: center;
        }
        h2 {
            font-size: 18px;
            text-align: center;
        }
        h3 {
            font-size: 16px;
            text-align: center;
        }
        h4 {
            font-size: 14px;
            text-align: center;
        }
        h5 {
            font-size: 12px;
            text-align: center;
        }
        h6 {
            font-size: 11px;
            text-align: center;
        }
        .content {
            padding: 20px;
        }
        .content > h2, .content > h3, .content > h4 {
            margin-top: 20px;
        }
        .content > pre {
            background-color: #eee;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .content > p {
            margin-bottom: 10px;
        }
        .content > blockquote {
            border-left: 5px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            background-color: #f9f9f9;
        }
        .content > ul, .content > ol {
            padding-left: 20px;
        }
        .content > li {
            margin-bottom: 5px;
        }
        code {
            font-family: monospace;
            background-color: #eee;
            padding: 2px;
            border-radius: 2px;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #eee;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Prism.highlightAll();
            hljs.highlightAll();
            const currentHour = new Date().getHours();
            if (currentHour >= 19 || currentHour < 6) {
                document.body.style.backgroundColor = '#222';
                document.body.style.color = '#ddd';
            }
        });
    </script>
</head>
<body>
    <div class="content">
        <h1>kafka 消息队列</h1>
        <p>kafka new Version</p>
        <h2>安装配置</h2>
        <p>查询下载最新版本 kafka</p>
        <p>http://kafka.apache.org/downloads.html</p>
        <pre><code class="language-bash">wget http://mirror.bit.edu.cn/apache/kafka/0.8.2.0/kafka-0.8.2.0-src.tgz
tar zxvf kafka-0.8.2.0-src.tgz
mv kafka-0.8.2.0-src /opt/local/kafka
cd /opt/local/kafka
./gradlew jar
</code></pre>
        <p>提示: </p>
        <p>错误: 找不到或无法加载主类 org.gradle.wrapper.GradleWrapperMain</p>
        <p>需要先安装 gradle</p>
        <pre><code class="language-bash">http://www.scala-lang.org/files/archive/scala-2.10.4.tgz
tar zxvf scala-2.10.4.tgz
mv scala-2.10.4 /usr/lib64/scala
</code></pre>
        <p>设置环境变量 </p>
        <pre><code class="language-bash">vi /etc/profile
</code></pre>
        <pre><code class="language-bash">export SACLA_HOME=/usr/lib64/scala/
export PATH=$SACLA_HOME/bin:$PATH
source /etc/profile
</code></pre>
        <p>然后再执行 gradlew jar</p>
        <pre><code class="language-bash">./gradlew jarAll
</code></pre>
        <p>如果 jarAll 会报错，java 版本不能为1.8 不然会报不兼容的错误，请使用1.7版本</p>
        <pre><code class="language-bash">./gradlew jar --stacktrace  --info --debug
</code></pre>
        <p></p>
        <p>创建日志目录</p>
        <pre><code class="language-bash">mkdir -p /opt/local/kafka/logs
</code></pre>
        <p></p>
        <p>编辑配置文件</p>
        <pre><code class="language-bash">vim config/server.properties
</code></pre>
        <p>将 log.dirs=/tmp/kafka-logs</p>
        <p>改为</p>
        <pre><code class="language-bash">log.dirs=/opt/local/kafka/logs
</code></pre>
        <p>将 zookeeper.connect=localhost:2181</p>
        <p>改为</p>
        <pre><code class="language-bash">zookeeper.connect=172.24.0.100:2181
</code></pre>
        <p>启动程序</p>
        <pre><code class="language-bash">nohup /opt/local/kafka/bin/zookeeper-server-start.sh /opt/local/kafka/config/zookeeper.properties &
nohup /opt/local/kafka/bin/kafka-server-start.sh /opt/local/kafka/config/server.properties &
</code></pre>
        <p></p>
        <p>创建主题</p>
        <pre><code class="language-bash">/opt/local/kafka/bin/kafka-topics.sh --create --zookeeper 192.168.20.200:2181 --replication-factor 1 --partitions 1 --topic LJ200
</code></pre>
        <p>查看现有主题</p>
        <pre><code class="language-bash">/opt/local/kafka/bin/kafka-topics.sh --list --zookeeper 192.168.20.200:2181
</code></pre>
    </div>
    <footer>
        Power By Gemini TextGenerate 2024-09-16
    </footer>
</body>
</html>