<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oracle for docker dev ENV</title>
    <meta name="description" content="oracle 链解决方案。">
    <meta name="keywords" content="oracle docker">
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff;
            color: #333;
            transition: background-color 0.5s ease;
            max-width: 820px;
            margin: 0 auto;
        }

        .dark-mode {
            background-color: #222;
            color: #eee;
        }

        h1 {
            font-size: 20px;
            margin-top: 0;
        }

        h2 {
            font-size: 18px;
        }

        h3 {
            font-size: 16px;
        }

        h4 {
            font-size: 14px;
        }

        h5 {
            font-size: 12px;
        }

        h6 {
            font-size: 11px;
        }

        pre {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        code {
            font-family: monospace;
            background-color: #eee;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .highlight {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .highlight pre {
            background-color: transparent;
            padding: 0;
            border-radius: 0;
        }

        .highlight code {
            font-family: monospace;
            background-color: transparent;
            padding: 0;
            border-radius: 0;
        }

        .container {
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .title-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .title-container h1, .title-container h2 {
            margin: 0;
        }
    </style>
</head>
<body>
    <script>
        // Use the provided random seed to generate a random number
        const randomSeed = 199602051111;
        Math.seedrandom(randomSeed);

        // Get the current time to determine the theme
        const currentHour = new Date().getHours();
        const isNight = currentHour >= 18 || currentHour < 6;

        // Apply the theme to the body
        if (isNight) {
            document.body.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
        }

        // Highlight.js and Prism.js setup (if you have them)
        // ... your Highlight.js and Prism.js setup here ...

        // Add the following functionality:
        // 1. Replace all occurrences of '```' with `<pre>` and `</pre>` tags
        // 2. Apply Highlight.js or Prism.js to code blocks within `<pre>` tags
        // 3. Add a "Copy Code" button to each code block
        // 4. Allow the user to toggle between light and dark themes
    </script>

    <div class="title-container">
        <h1>oracle for docker dev ENV</h1>
        <h2>oracle 链解决方案。</h2>
    </div>

    <div class="container">
        <h2>下载镜像(pull)</h2>
        <pre><code>docker pull wnameless/oracle-xe-11g</code></pre>

        <pre><code>docker run -d -p 49160:22 -p 49161:1521 -e ORACLE_ALLOW_REMOTE=true wnameless/oracle-xe-11g</code></pre>
        By default, the password verification is disable(password never expired). If you want it back, run this:

        <pre><code>docker run -d -p 49160:22 -p 49161:1521 -e ORACLE_PASSWORD_VERIFY=true wnameless/oracle-xe-11g</code></pre>

        For performance concern, you may want to disable the disk asynch IO:

        <pre><code>docker run -d -p 49160:22 -p 49161:1521 -e ORACLE_DISABLE_ASYNCH_IO=true wnameless/oracle-xe-11g</code></pre>
        For XDB user, run this:

        <pre><code>docker run -d -p 49160:22 -p 49161:1521 -p 8080:8080 -e ORACLE_ENABLE_XDB=true wnameless/oracle-xe-11g</code></pre>
        Check if localhost:8080 work

        <pre><code>curl -XGET "http://localhost:8080"</code></pre>
        You will show

        <pre><code><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<TITLE>401 Unauthorized</TITLE>
</HEAD><BODY><H1>Unauthorized</H1>
</BODY></HTML></code></pre>

        <h2>Login http://localhost:8080 with following credential:</h2>
        username: XDB
        password: xdb
        Connect database with following setting:

        hostname: localhost
        port: 49161
        sid: xe
        username: system
        password: oracle
        Password for SYS & SYSTEM

        oracle
        Login by SSH

        <pre><code>ssh root@localhost -p 49160</code></pre>
        password: admin
        Support custom DB Initialization

        <h2>Dockerfile</h2>
        <pre><code>FROM wnameless/oracle-xe-11g

ADD init.sql /docker-entrypoint-initdb.d/</code></pre>

        <h2>SQLDeveloper</h2>

        <pre><code>--- 遇到的问题 ora-01045

---ORA-01045: user ... lacks CREATE SESSION privilege; logon denied
--- This error is thrown if a user wants to log on a database but lacks the create session system privilege.
---In order to give someone this privilege, use:

grant create session to aom;
--- See also other Oracle errors.

--- 创建表空间
CREATE   TABLESPACE aom
DATAFILE '/data/disk1/aom_space.dbf' size 500m
AUTOEXTEND ON
NEXT 200M MAXSIZE 20480M
EXTENT MANAGEMENT LOCAL;
--- oracle 创建DB需要用用户去创建，也就是先要创建用户 并且指定表空间
CREATE USER aom IDENTIFIED BY 123456 DEFAULT TABLESPACE aom_space;

---创建用户并指定表空间和临时表空间
CREATE USER aom IDENTIFIED BY 123456
DEFAULT TABLESPACE aom_space
TEMPORARY TABLESPACE aom_temp;

---授权用户
GRANT CREATE USER,DROP USER,ALTER USER ,CREATE ANY VIEW ,
     DROP ANY VIEW,EXP_FULL_DATABASE,IMP_FULL_DATABASE,
     DBA,CONNECT,RESOURCE,CREATE SESSION TO  aom;


---删除表空间
DROP TABLESPACE aom_space INCLUDING CONTENTS AND DATAFILES;


---查看表空间
SELECT tv.TABLESPACE_NAME "TABLESPACE_NAME",TOTALSPACE "TOTALSPACE/M",FREESPACE "FREESPACE/M",ROUND((1-FREESPACE/TOTALSPACE)*100,2) "USED%"
FROM
(SELECT TABLESPACE_NAME,ROUND(SUM(bytes)/1024/1024) TOTALSPACE FROM    DBA_DATA_FILES GROUP BY TABLESPACE_NAME) tv,
         (SELECT TABLESPACE_NAME,ROUND(SUM(bytes)/1024/1024) FREESPACE FROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME) fs
WHERE tv.TABLESPACE_NAME=fs.TABLESPACE_NAME;


---查看临时表空间
SELECT TABLESPACE_NAME FROM DBA_TABLESPACES;

---增加表空间大小
ALTER TABLESPACE aom_space ADD DATAFILE '/data/disk1/aom_space.dbf' size 4096M;

---增加临时表空间大小
ALTER DATABASE TEMPFILE '/data/disk1/aom_temp.dbf' RESIZE 8192M;

---删除用户
DROP USER aom CASCADE

---把数据导入不同于原系统的表空间，在导入之后却往往发现，数据被导入了原表空间(下面解决此方法)
grant connect, resource,dba to aom;
---回收用户unlimited tablespace权限，这样就可以导入到用户缺省表空间：
revoke unlimited tablespace from aom;
alter user aom quota 0 on aom_space;
alter user aom quota unlimited on aom_space;</code></pre>

    </div>

    <footer>
        Power By Gemini TextGenerate 2024-09-16
    </footer>
</body>
</html>